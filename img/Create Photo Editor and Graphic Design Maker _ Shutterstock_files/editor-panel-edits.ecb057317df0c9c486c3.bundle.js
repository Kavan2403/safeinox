(this.webpackJsonp=this.webpackJsonp||[]).push([[47,45],{"055b92b258f07620b728":function(e,t,n){var i=n("0edb12b56a7fbeb10c7d");"string"==typeof i&&(i=[[e.i,i,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n("1e4534d1d62a11482e97")(i,a);i.locals&&(e.exports=i.locals)},"0edb12b56a7fbeb10c7d":function(e,t,n){(t=e.exports=n("c138e55a31f3f8960e99")(!1)).push([e.i,"/* stylelint-disable property-no-unknown */\n\n/* stylelint-enable */\n.src-editor-components-tool_bar-panels-effects--curves-module-curve_control_container-TvZkH canvas {\n  margin: 10px 27px;\n  border: 2px solid rgb(190, 190, 190);\n}",""]),t.locals={curve_control_width:"186px",curve_control_container:"src-editor-components-tool_bar-panels-effects--curves-module-curve_control_container-TvZkH"}},"148a62ea3923fcf8076e":function(e,t,n){var i=n("4a87a4e92f9a940b612c");"string"==typeof i&&(i=[[e.i,i,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n("1e4534d1d62a11482e97")(i,a);i.locals&&(e.exports=i.locals)},"170301c0c5f906f1d146":function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return r}));var i=n("498f48497f164fb7c73f"),a=n("32de4e5ff28a331180c4");const s={angleDegrees:0,shape:i.k.circle,spacing:a.d};function o(e,t,n){return Object.assign(Object.assign({},s),{hardness:t,strength:n,size:e})}function r(e,t,n,i){const a=Math.sqrt(e[0]*e[1])*t;return Object.assign(Object.assign({},s),{hardness:n,strength:i,size:a})}},"2c020a6d173d75eacda5":function(e,t,n){(t=e.exports=n("c138e55a31f3f8960e99")(!1)).push([e.i,"/* stylelint-disable property-no-unknown */\n\n/* stylelint-enable */\n.src-editor-components-tool_bar-controls--histogram-module-canvas_style-1KM5a {\n  width: 240px;\n  height: 100px;\n  margin: 8px 0;\n  border: 2px solid #ccc;\n  background: -webkit-gradient(linear, left top, right top, from(#ccc), to(#fff));\n  background: -o-linear-gradient(left, #ccc, #fff);\n  background: linear-gradient(to right, #ccc, #fff);\n}",""]),t.locals={canvas_width:"240px",canvas_height:"100px",canvas_style:"src-editor-components-tool_bar-controls--histogram-module-canvas_style-1KM5a"}},"380faf932502f6ab465a":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("8af190b70a6bc55c6f1b"),a=n("10efe950f6a368ae5b5d"),s=n.n(a);function o({children:e}){return i.createElement("div",{className:s.a.feature_row},e)}},"4a87a4e92f9a940b612c":function(e,t,n){(t=e.exports=n("c138e55a31f3f8960e99")(!1)).push([e.i,".src-editor-components-tool_bar-panels-basic_edits--styles-module-color_display-1v7mT {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  width: 100%;\n}\n.src-editor-components-tool_bar-panels-basic_edits--styles-module-color_display-1v7mT div:nth-child(1) {\n  width: 29px;\n  height: 29px;\n  margin: -3px 9px 0px -2px;\n}\n.src-editor-components-tool_bar-panels-basic_edits--styles-module-color_display-1v7mT div:nth-child(2) {\n  color: #85888f;\n  -webkit-box-flex: 1;\n      -ms-flex-positive: 1;\n          flex-grow: 1;\n  margin-left: 5px;\n  margin-top: 4px;\n}\n.src-editor-components-tool_bar-panels-basic_edits--styles-module-color_display-1v7mT div:nth-child(2) input {\n  width: 90px;\n  height: 30px;\n}\n.src-editor-components-tool_bar-panels-basic_edits--styles-module-color_display-1v7mT div:nth-child(3) {\n  border: 1px solid;\n  border-color: #cacdd2;\n  height: 30px;\n  width: 30px;\n}",""]),t.locals={color_display:"src-editor-components-tool_bar-panels-basic_edits--styles-module-color_display-1v7mT"}},"4f984cc61cdfb2c5a3d7":function(e,t,n){(t=e.exports=n("c138e55a31f3f8960e99")(!1)).push([e.i,'.src-editor-components-tool_bar-panels-basic_edits--crop-module-dimensions-gSNh5 {\n  display: grid;\n  grid-gap: 0 10px;\n  grid-template-columns: [edge-left] 80px [inner-left] auto [inner-right] 80px [edge-right] 37px;\n  grid-template-rows: 23px 30px;\n}\n.src-editor-components-tool_bar-panels-basic_edits--crop-module-dimensions-gSNh5 label {\n  margin: 0;\n}\n.src-editor-components-tool_bar-panels-basic_edits--crop-module-dimensions-gSNh5 button {\n  padding: 0;\n  margin-left: 5px;\n  width: 32px;\n  height: 32px;\n}\n.src-editor-components-tool_bar-panels-basic_edits--crop-module-dimensions-gSNh5 .src-editor-components-tool_bar-panels-basic_edits--crop-module-divider-pSAaK {\n  height: 30px;\n  color: #0c121c;\n  text-align: center;\n  font-family: "Roboto", "sans-serif";\n  font-style: normal;\n  font-weight: 400;\n  font-size: 14px;\n  letter-spacing: 0.2px;\n  line-height: 20px;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  white-space: nowrap;\n  overflow: hidden;\n  line-height: 30px;\n}\n.src-editor-components-tool_bar-panels-basic_edits--crop-module-dimensions-gSNh5 input {\n  width: 100%;\n}',""]),t.locals={dimensions:"src-editor-components-tool_bar-panels-basic_edits--crop-module-dimensions-gSNh5",divider:"src-editor-components-tool_bar-panels-basic_edits--crop-module-divider-pSAaK"}},"59f5d2de8e4af075fe04":function(e,t,n){"use strict";n.r(t);var i=n("58cf5f1b1e4a6f0868c5"),a=n("8af190b70a6bc55c6f1b"),s=n("0a81c721557e72a0975d"),o=n("24a74d8dc2d9aae519f4"),r=n("380faf932502f6ab465a"),c=n("83b0979d834b8857fd55"),h=n("21ac4afb464fa2b81ab4"),d=n("b3418c4b1abfc018316c"),l=n("2e4b245298f144fc71ab"),u=n("22e557fd97e48b10e90c"),p=n("2558ccbaf65dbaa2a8ea"),m=n("e85402014520770cc6ea"),g=n("04be3c4e4062068cf67d"),b=n("87a15dbca1a196505b54"),f=n("7bbbac7aed806ed992a7"),w=n("f8240f634fbfcfc7f8e7"),v=n("f2a8982de0a0fd05974b"),x=n("beb34cba39c7f4b00add"),O=n("ce278268d8afac4fda10"),_=n.n(O),j=n("c18a0a7fc582414db0d1"),C=n("2140f45076bbfc6c339b"),D=n("ed6ecdbebdfc3fd224d3"),y=n("0394f6985ee06c9877a5"),P=n("c8754ed825687b803f59"),S=n("78afd5a86f893d2d403e"),E=n("9c772359e08e81b5b3ba"),k=n("2ffad664784f29a743c2"),M=n("2b9ee7288ec5565199f1"),A=n("a96a289c8c265616676e");const I=n("a62776011eba6c9672ff");function F(){return[Object(i.d)("toolBar","no_fixed_proportions"),Object(i.d)("toolBar","original_proportions"),...I.map(e=>Object(A.a)(e.name)),Object(i.d)("toolBar","width_x_height",{WIDTH:screen.width,HEIGHT:screen.height})]}function z(e,t){if(0===e)return 0;if(1===e)return v.a.x(t)/v.a.y(t);const n=I[e-2];return n.width/n.height}function B(e){return{presetIndex:0,width:`${e.width}`,height:`${e.height}`,targetSize:null}}class R extends a.Component{constructor(e){super(e),this.widthChange=e=>{const{maxHeight:t,maxWidth:n}=this.props;let i=e.target.value;if(this.isValidDimension(i)){i=Math.min(i,n);const e=V(this.state.presetIndex),a=z(this.state.presetIndex,this.props.documentSize);let s=a?Math.max(Math.round(i/a),1):this.props.height;if(s>t){const e=t/s;s=t,i=Math.round(i*e)}a||e?this.setState({width:`${i}`,height:`${s}`}):this.setState({width:`${i}`,height:`${s}`,presetIndex:0,targetSize:null}),this.props.setCropDimensions(i/s,v.a.create(i,s),!e,this.props.shouldConstrainCrop)}},this.heightChange=e=>{const{maxHeight:t,maxWidth:n}=this.props;let i=e.target.value;if(this.isValidDimension(i)){i=Math.min(i,t);const e=V(this.state.presetIndex),a=z(this.state.presetIndex,this.props.documentSize);let s=a?Math.max(Math.round(i*a),1):this.props.width;if(s>n){const e=n/s;s=n,i=Math.round(i*e)}a||e?this.setState({width:`${s}`,height:`${i}`}):this.setState({width:`${s}`,height:`${i}`,presetIndex:0,targetSize:null}),this.props.setCropDimensions(s/i,v.a.create(s,i),!e,this.props.shouldConstrainCrop)}},this.onPresetSelect=e=>{const t=F(),n=parseInt(e,10);this.setState({presetIndex:n});let i=t[n];if(n<2&&(i=null),this.props.onPresetSelect(i),0===n)this.props.toggleCropRatioLock(!1);else if(1===n){const{dx:e,dy:t}=v.a.toSize(this.props.documentSize),n=e/t;this.props.setCropDimensions(n,null,!0,!0)}else if(n===t.length-1){const e=v.a.create(screen.width,screen.height),t=e[0]/e[1];this.props.setCropDimensions(t,null,!0,!0),this.setState({targetSize:e}),this.props.setScalePhoto(e)}else{const e=I[n-2],{width:t,height:i,scaleDocument:a}=e;this.props.setCropDimensions(t/i,null,!0,!0);const s=a?v.a.create(t,i):null;this.setState({targetSize:s}),this.props.setScalePhoto(s)}},this.toggleScalePhoto=(e,t=!1)=>{!t&&this.onPresetSelect("0");const n=t?v.a.create(this.props.width,this.props.height):null;this.setState({targetSize:n}),this.props.setScalePhoto(n),this.props.toggleCropRatioLock(t)},this.onOpen=()=>{this.setState(B(this.props)),this.props.onOpen()},this.getMaxWidth=()=>{return this.state.targetSize?Object(k.i)():this.props.maxWidth},this.getMaxHeight=()=>{return this.state.targetSize?Object(k.i)():this.props.maxHeight},this.state=B(e)}componentDidUpdate(e){e.width===this.props.width&&e.height===this.props.height||this.setState({width:`${this.props.width}`,height:`${this.props.height}`})}isValidDimension(e){const t=parseInt(e,10);return`${t}`===e&&null!=t&&t>0}render(){const{onApply:e,flipCropBox:t,shouldConstrainCrop:n}=this.props,s=F();return a.createElement(o.a,{title:Object(i.d)("tools","crop_canvas"),panelId:M.b.crop,onOpen:this.onOpen,onApply:e,layerEffectType:C.a.global},a.createElement(f.b,{label:Object(i.d)("toolBar","aspect_ratio"),onChange:this.onPresetSelect,name:"cropPresets"},s.map((e,t)=>a.createElement(p.a,{key:t,selected:t===this.state.presetIndex,value:t,label:e}))),a.createElement(r.a,null,a.createElement("div",{className:_.a.dimensions},a.createElement(c.a,{htmlFor:"txtCropWidth"},Object(i.d)("toolBar","width")),a.createElement("div",null),a.createElement(c.a,{htmlFor:"txtCropHeight"},Object(i.d)("toolBar","height")),a.createElement("div",null),a.createElement(h.a,{name:"txtCropWidth",value:this.state.width,onChange:this.widthChange,maxValue:this.getMaxWidth(),units:j.b.pixels}),a.createElement("div",{className:_.a.divider},"✕"),a.createElement(h.a,{name:"txtCropHeight",value:this.state.height,onChange:this.heightChange,maxValue:this.getMaxHeight(),units:j.b.pixels}),a.createElement(u.c,{for:"btn-crop-rotate",text:Object(i.d)("toolBar","rotate_crop"),offset:{dx:0,dy:-3}}),a.createElement(l.a,{id:"btn-crop-rotate",onClick:Object(E.partial)(t,n)},a.createElement(x.default,null)))),a.createElement(d.b,{name:"scalePhoto",label:Object(i.d)("toolBar","scale_photo"),value:null!==this.state.targetSize,onChange:this.toggleScalePhoto}))}}function V(e){return 0===e}var H=Object(s.b)((function(e){const t=Object(w.getCropSelection)(e);let n=v.a.zeroes;t&&(n=t.targetSize||Object(w.getCropSelectionSize)(e));const i=Math.round(v.a.dx(n)),a=Math.round(v.a.dy(n)),s=Object(w.getDocumentSize)(e),o=Object(w.getBackgroundNode)(e);let r;o&&(r=Object(w.getNodeBounds)(e,o.id));const c=r||D.g.fromSize(v.a.create(Object(k.i)(),Object(k.i)()),v.a.zeroes),h=Object(P.getCropSelectionBounds)(e.scene),d=!!r&&Object(P.backgroundCoversCanvas)(r,s);let l=Object(k.i)(),u=Object(k.i)();const p=d&&!Object(S.kb)(o);return p&&h&&(l=Object(y.c)(h,c),u=Object(y.b)(h,c)),{width:i,height:a,documentSize:s,maxWidth:Math.round(l),maxHeight:Math.round(u),shouldConstrainCrop:p}}),(function(e){return{onOpen:()=>{e(Object(m.updateEditMode)(b.a.canvasCrop))},onApply:()=>{e(g.b.scene.applyCrop())},setCropDimensions:(t,n,i,a)=>{e(g.b.scene.setCropDimensions(t,n,i,a))},toggleCropRatioLock:t=>{e(g.b.scene.setCropLock(t))},flipCropBox:t=>{e(g.b.scene.flipCropBox(t))},setScalePhoto:t=>{e(g.b.scene.setCropTargetSize(t))},onPresetSelect:t=>{e(g.b.sagas.setCropPreset(t))}}}))(R),T=n("d7d560ce0f071b4b09f9"),L=n("d32ec60effb195199e06"),W=n("11c151e25fd49d8d406a"),N=n("3be59193b47cb3a9d14c"),U=n("1f94477ee3b7ef935974"),G=n("44a25bac8458a617591e"),$=n("1a0a1844be3ac02d944b");const X=100,q=5,Y={shouldShowGrid:!1,angle:0};function K(e){return`${Z(e).toString()}º`}function Z(e){return Math.round(e)/X}function J(e,t,n){const i=n?0:1;return-1*e.A[i]===t.A[i]&&-1*e.B[i]===t.B[i]&&-1*e.C[i]===t.C[i]&&-1*e.D[i]===t.D[i]}function Q(e,t){return!!Object(E.inRange)(e,-t,t)||Math.abs(Math.abs(e)-Math.abs(t))<.01}class ee extends a.Component{constructor(e){super(e),this.state=Object.assign({},Y),this.onOpen=()=>{this.setState(Object.assign(Object.assign({},Y),{shouldShowGrid:this.props.shouldShowGrid})),this.props.onOpen()},this.handleStraightenChange=(e,t,n)=>{t/=X;const{angle:i}=this.state,a=t-i;this.setState({angle:t},()=>{const e=a*Math.PI/180;this.props.straightenDocument(e),n&&this.props.commit()})},this.onStraightenDragEnd=()=>{this.props.onStraightenDragEnd(this.state.shouldShowGrid)},this.initialAngle=e.documentAngle}componentDidUpdate(e,t){const{targetRect:n,documentAngle:i}=this.props,a=Math.round(i-e.documentAngle);if(a&&a%90==0||!e.targetRect||!n)return;let s=t.angle;const o=i-this.initialAngle,r=J(e.targetRect,n,!0),c=J(e.targetRect,n,!1);r||c?s*=-1:Q(o,q)?s=o:Q(o-90,q)?s=o-90:Q(o-180,q)?s=o-180:Q(o-270,q)?s=o-270:Q(o+90,q)&&(s=o+90),s!==t.angle&&this.setState({angle:s})}render(){const{onApply:e,onStraightenDragStart:t,rotateLeft:n,rotateRight:s,flipHorizontal:r,flipVertical:c}=this.props,h=Z(this.state.angle*X*100);return a.createElement(o.a,{title:Object(i.d)("editor","rotate_canvas"),panelId:M.b.rotate,onOpen:this.onOpen,onApply:e,layerEffectType:C.a.transform},a.createElement(u.c,{for:"canvas_rotate_left"},Object(i.d)("editor","rotate_counterclockwise")),a.createElement(u.c,{for:"canvas_rotate_right"},Object(i.d)("editor","rotate_clockwise")),a.createElement(u.c,{for:"canvas_flip_horizontal"},Object(i.d)("editor","flip_horizontally")),a.createElement(u.c,{for:"canvas_flip_vertical"},Object(i.d)("editor","flip_vertically")),a.createElement(L.a,null,a.createElement(U.default,{id:"canvas_rotate_left",name:"rotateLeft",onClick:n}),a.createElement(N.default,{id:"canvas_rotate_right",name:"rotateRight",onClick:s}),a.createElement(G.default,{id:"canvas_flip_horizontal",name:"flipHorizontal",onClick:r}),a.createElement($.default,{id:"canvas_flip_vertical",name:"flipVertical",onClick:c})),a.createElement(T.a,{name:"straighten",label:Object(i.d)("editor","straighten"),onChange:this.handleStraightenChange,value:h,min:-q*X,max:q*X,step:.01,formatter:K,onSliderDragStart:t,onSliderDragEnd:this.onStraightenDragEnd,precision:100}))}}const te={shouldShowGrid:!1,documentAngle:0,targetRect:D.g.unitRect};var ne=Object(s.b)((function(e){if(!(null!=e.ux.panelSelected&&"rotate"===e.ux.panelSelected.panelId))return te;const t=w.getShowGrid(e),n=Object(W.a)(w.getDocumentAngle(e)),i=w.getBackgroundId(e);return{shouldShowGrid:t,documentAngle:n,targetRect:i?w.getNodeHoverBounds(e,i):null}}),(function(e){return{rotateLeft:()=>{e(g.b.scene.rotateLeft()),e(g.b.undo.softCommit())},rotateRight:()=>{e(g.b.scene.rotateRight()),e(g.b.undo.softCommit())},flipHorizontal:()=>{e(Object(g.d)(g.b.scene.flipHorizontal())),e(g.b.undo.softCommit())},flipVertical:()=>{e(Object(g.d)(g.b.scene.flipVertical())),e(g.b.undo.softCommit())},straightenDocument:t=>{0!==t&&e(Object(g.d)(g.b.scene.straightenDocument(t)))},onOpen:()=>e(g.b.editor.updateEditMode(b.a.rotate)),onApply:()=>{e(g.b.ux.applyPanel()),e(g.b.scene.centerDocument())},commit:()=>e(g.b.undo.softCommit()),onStraightenDragStart:()=>{e(g.b.editor.hideGrid()),e(g.b.scene.showStraighteningGrid())},onStraightenDragEnd:t=>{e(g.b.scene.hideStraighteningGrid()),t&&e(g.b.editor.showGrid())}}}))(ee),ie=n("4aaad9891c45466dfe8a"),ae=n("d1f50e92292d517c198b"),se=n("8ee0e7184e6724b5d17b"),oe=n("92f89ad909ff830126b9"),re=n("c5982d327313e6780ee1"),ce=n("95cd387250dff3005b83"),he=n("41f8138c9b0045deaaf9"),de=n("148a62ea3923fcf8076e"),le=n.n(de),ue=n("0ea241b564e1b38b80e9"),pe=n("b912ecc4473ae8a2ff0b"),me=n.n(pe),ge=n("631035bb20a8db9b9de4"),be=n("9d145ef5aaf44b342f0f"),fe=n("dc08d784e9162147899b"),we=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]])}return n};const ve=M.b.colors,xe=-100,Oe=100,_e=-100,je=100;function Ce(e){return se.mb(e,xe,Oe,0,1)}function De(e){return se.mb(e,0,1,xe,Oe)}function ye(e){return se.mb(e,_e,je,0,1)}function Pe(e){return se.mb(e,0,1,_e,je)}class Se extends a.PureComponent{constructor(){super(...arguments),this.state={decoded:null,rgb:se.jb},this.refInput=null,this.histogramReady=()=>{const{histograms:e}=this.props;return!!e&&!e.updating},this.setRefInput=e=>{this.refInput=e},this.whiteBalanceClick=()=>{const{isMaskPaletteOpen:e,isPicking:t,toggleMaskPalette:n,toggleWhiteBalancePicker:i}=this.props;e&&n(),t?this.unbindEventListeners():this.bindEventListeners(),i(!t,this.state.decoded)},this.updateTint=(e,t,n)=>{return this.props.updateFxAttr(e,t,n)},this.autoAdjustClick=()=>{const{isPicking:e}=this.props;e&&this.whiteBalanceClick();const{histograms:t}=this.props;if(!t||t.updating)return;const n=Object(ge.c)(t.green),i=Object(ge.c)(t.blue),a=Object(ge.c)(t.red),s=se.sb(a/255,n/255*2-1,i/255*2-1,1),o=se.rb(s),r=se.k(o);this.props.updateFxAttr("tint",Math.round(100*r.tint),!1),this.props.updateFxAttr("temperature",Math.round(100*r.temperature),!1),this.setState({rgb:o}),this.props.commit()},this.updateFxColor=e=>{const t=se.k(e);this.props.updateFxAttr("temperature",Math.round(100*t.temperature),!1),this.props.updateFxAttr("tint",Math.round(100*t.tint),!1),this.props.commit()},this.handleSliderChange=(e,t,n=!0)=>{this.props.isPicking&&this.whiteBalanceClick(),this.props.updateFxAttr(e,t,n)},this.onChangeComplete=e=>{this.updateFxColor(e)},this.handleMouseUp=e=>{e.preventDefault(),e.stopPropagation();const t=this.props.neutralColor||se.jb;Object(se.D)(se.hb,t)||this.setState({rgb:t})},this.colorDisplayComponent=()=>{const e=!this.histogramReady(),t=me()(le.a.eyedropper,{[le.a.active]:this.props.isPicking,[le.a.disabled]:e}),n=this.state.rgb;return a.createElement(r.a,null,a.createElement("div",{className:le.a.picker_label},Object(i.d)("toolBar","white_balance_picker")),a.createElement("div",{className:le.a.color_display},a.createElement(ce.a,{color:n,selected:!1,showSelection:!1}),a.createElement("div",null,` ${se.v(Object.assign(Object.assign({},n),{a:255}))} `),a.createElement("div",{className:t,onClick:e?void 0:this.whiteBalanceClick},a.createElement(he.default,null))))}}componentWillUnmount(){this.unbindEventListeners()}bindEventListeners(){window.addEventListener("mouseup",this.handleMouseUp)}unbindEventListeners(){window.removeEventListener("mouseup",this.handleMouseUp)}render(){const e=this.props,{uiFxAttrs:t,updateFxAttr:n,neutralColor:s,isPicking:c,onOpen:h}=e,d=we(e,["uiFxAttrs","updateFxAttr","neutralColor","isPicking","onOpen"]);return a.createElement(o.a,Object.assign({},d,{title:Object(i.d)("core","colors"),panelId:ve,showMaskButton:!0,onOpen:h}),a.createElement(r.a,null,a.createElement(l.j,{style:{width:"100%"},name:"btnAutoAdjust",renderAsDisabledWhenClicked:!0,onClick:this.autoAdjustClick,disabled:!this.histogramReady(),label:Object(i.d)("toolBar","auto_adjust_colors")})),this.colorDisplayComponent(),a.createElement(ue.b,{name:"temperature",value:ye(t.temperature),label:Object(i.d)("effect","temperature"),variant:ue.a.temperatureSlider,onChange:e=>this.handleSliderChange("temperature",Pe(e),!1),onChangeComplete:e=>this.handleSliderChange("temperature",Pe(e))}),a.createElement(ue.b,{name:"tint",value:Ce(t.tint),label:Object(i.d)("effect","tint"),variant:ue.a.tintSlider,onChange:e=>this.handleSliderChange("tint",De(e),!1),onChangeComplete:e=>this.handleSliderChange("tint",De(e))}),a.createElement(be.a,null),a.createElement(fe.a,{name:"saturation",label:Object(i.d)("editor","saturation"),min:-100,max:100,onChange:this.handleSliderChange,formatter:re.a.roundedPercent}),a.createElement(fe.a,{name:"vibrance",label:Object(i.d)("effect","vibrance"),min:-100,max:100,onChange:this.handleSliderChange,formatter:re.a.roundedPercent}),a.createElement(fe.a,{name:"fade",label:Object(i.d)("effect","fade"),min:0,max:100,onChange:this.handleSliderChange,formatter:re.a.roundedPercent}))}}const Ee=Object(s.b)((function(e){return{neutralColor:e.ux.eyedropper.originalColor,isPicking:w.getEditMode(e)===b.a.sampleColor,histograms:w.getHistograms(e,se.b.YUV),docSize:w.getDocumentSize(e),isMaskPaletteOpen:w.getMasksPaletteVisible(e)}}),(function(e,t){return{toggleWhiteBalancePicker:(t,n)=>{t?(e(g.b.ux.setEyedropperToken("whiteBalance")),e(g.b.editor.updateEditMode(b.a.sampleColor))):e(g.b.editor.updateEditMode(b.a.effect))},onApply:()=>{e(g.b.editor.updateEditMode(b.a.effect)),e(g.b.scene.clearHistograms()),t.onApply()},toggleMaskPalette:()=>e(g.b.ux.togglePalette(b.b.masks))}}))(Se);var ke=Object(ie.a)(Ee,{effectType:oe.a.ColorsYUV,panelId:ve,fxAttrDefaults:ae.b,getUiFxAttrs:function({temperature:e,tint:t}){return{temperature:e,tint:t}}}),Me=n("fdec0bacdcdf0929ca76"),Ae=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]])}return n};const Ie=M.c.exposure,Fe="highlights",ze="shadows",Be="midtones";class Re extends a.PureComponent{constructor(){super(...arguments),this.updateAttr=(e,t,n)=>{this.props.updateFxAttr(e,t,n)},this.autoAdjustClick=()=>{this.props.updateFxAttr("auto",!0,!0)}}render(){const e=this.props,{uiFxAttrs:t,onOpen:n,isLoading:s}=e,c=Ae(e,["uiFxAttrs","onOpen","isLoading"]);return a.createElement(o.a,Object.assign({},c,{title:Object(i.d)("effect","exposure"),panelId:Ie,showMaskButton:!0,onOpen:n,isLoading:s}),a.createElement(r.a,null,a.createElement(l.j,{style:{width:"100%"},name:"btnAutoAdjust",onClick:this.autoAdjustClick,disabled:s,label:Object(i.d)("effect","auto_adjust_exposure")})),a.createElement(fe.a,{name:"brightness",label:Object(i.d)("effect","brightness"),min:-100,max:100,onChange:this.props.updateFxAttr,formatter:re.a.roundedPercent}),a.createElement(fe.a,{key:Fe,name:Fe,label:Object(i.d)("effect","highlights"),min:-100,max:100,onChange:this.updateAttr,formatter:re.a.roundedPercent}),a.createElement(fe.a,{key:Be,name:Be,label:Object(i.d)("effect","mid_tones"),min:-100,max:100,onChange:this.updateAttr,formatter:re.a.roundedPercent}),a.createElement(fe.a,{key:ze,name:ze,label:Object(i.d)("effect","shadows"),min:-100,max:100,onChange:this.updateAttr,formatter:re.a.roundedPercent}),a.createElement(fe.a,{name:"contrast",label:Object(i.d)("effect","contrast"),min:-100,max:100,onChange:this.props.updateFxAttr,formatter:re.a.roundedPercent}))}}var Ve=Object(ie.a)(Re,{effectType:oe.a.RelativeExposure,panelId:Ie,fxAttrDefaults:Me.b}),He=n("0fdaf1f6041c5813ff64"),Te=n("82217a0434150cc83236"),Le=n("b979a0d2fcacdec8535f"),We=n("759a52a4e1e7ec55c7a4"),Ne=n("32261a47d90ddcfca563"),Ue=n("cb7e6ae6e4d49f6807c2");const Ge=M.b.resize;function $e(e){return{width:e.width,height:e.height,maxWidth:We.p,maxHeight:We.p,usePercentage:!1,lockProportions:!0,lastInputChange:null,originalSize:v.a.zeroes,originalMinWidth:Ne.e,originalMinHeight:Ne.e,originalAspectRatio:0,isEditing:!1}}function Xe(e){const t=parseInt(e,10);return`${t}`===e&&null!=t&&t>0}function qe(e,t,n,i){let a=Math.max(Math.round(e/t),Ne.e);return a>i?(a=i,e=Math.round(a*t)):a<n&&(a=n,e=Math.round(a*t)),{width:e,height:a}}function Ye(e,t,n,i){let a=Math.max(Math.round(e*t),Ne.e);return a>i?(a=i,e=Math.round(a/t)):a<n&&(a=n,e=Math.round(a/t)),{width:a,height:e}}class Ke extends a.Component{constructor(){super(...arguments),this.state=$e(this.props),this.onOpen=()=>{this.setState((e,t)=>{const{width:n,height:i,minWidth:a,minHeight:s,onOpen:o}=t;o();const r=n/i,c=v.a.create(n,i);return Object.assign(Object.assign({},$e(t)),{width:n,height:i,originalSize:c,originalMinWidth:a,originalMinHeight:s,originalAspectRatio:r})})},this.setSizeNoDebounce=()=>{const{width:e,height:t,originalMinWidth:n,originalMinHeight:i}=this.state,a=v.a.max(v.a.create(e,t),v.a.create(n,i)),s=v.a.divide(a,v.a.create(this.props.width,this.props.height));this.resize(a,s)},this.setSizeDebounced=Object(E.debounce)(this.setSizeNoDebounce,We.u),this.setSize=()=>this.props.instantUpdate?this.setSizeNoDebounce():this.setSizeDebounced(),this.resize=(e,t)=>{this.props.resizeDocumentAndNodes(e),this.props.rerasterize(this.props.nodeIds)},this.toggleLockProportions=()=>{this.setState((e,t)=>{let{width:n,height:i}=e;const{lastInputChange:a,originalAspectRatio:s,maxWidth:o,maxHeight:r,originalMinWidth:c,originalMinHeight:h}=e,d=!e.lockProportions;return d&&("width"===a?({width:n,height:i}=qe(n,s,h,r)):"height"===a&&({width:n,height:i}=Ye(i,s,c,o))),Object.assign(Object.assign({},e),{lockProportions:d,width:n,height:i,isEditing:!0})},()=>{this.state.lockProportions&&this.setSize()})},this.calcPercentageFromValue=(e,t)=>{const{originalSize:n}=this.state,[i,a]=n;let s=t?e/i*100:e/a*100;return s=Math.round(s),s},this.calcValuefromPercentage=(e,t)=>{const{originalSize:n}=this.state,[i,a]=n;let s=t?i*e/100:a*e/100;return s=Math.round(s)<1?1:Math.round(s),s},this.togglePercentage=(e,t)=>{this.setState((e,n)=>{return Object.assign(Object.assign({},e),{usePercentage:t})})},this.setWidth=e=>{const t=e.target.value;if(!Xe(t))return;let n=parseInt(t,10);n=this.state.usePercentage?this.calcValuefromPercentage(n,!0):n,n=Math.min(n,this.state.maxWidth),n<this.state.originalMinWidth||this.setState((e,t)=>{let i=e.height;return e.lockProportions&&({width:n,height:i}=qe(n,e.originalAspectRatio,e.originalMinHeight,e.maxHeight)),Object.assign(Object.assign({},e),{width:n,height:i,lastInputChange:"width",isEditing:!0})},()=>{this.setSize()})},this.setHeight=e=>{const t=e.target.value;if(!Xe(t))return;let n=parseInt(t,10);n=this.state.usePercentage?this.calcValuefromPercentage(n,!1):n,n=Math.min(n,this.state.maxHeight),n<this.state.originalMinHeight||this.setState((e,t)=>{let i=e.width;return e.lockProportions&&({width:i,height:n}=Ye(n,e.originalAspectRatio,e.originalMinWidth,e.maxHeight)),Object.assign(Object.assign({},e),{height:n,width:i,lastInputChange:"height",isEditing:!0})},()=>{this.setSize()})},this.handleApply=()=>{this.setSizeNoDebounce(),this.props.onApply()}}static getDerivedStateFromProps(e,t){return t.isEditing?t.width===e.width&&t.height===e.height?{isEditing:!1}:null:{width:e.width,height:e.height}}render(){const{width:e,height:t,usePercentage:n,lockProportions:s}=this.state,p=n?j.b.percent:j.b.pixels;return a.createElement(o.a,{title:Object(i.d)("editor","resize_canvas"),panelId:Ge,onOpen:this.onOpen,onApply:this.handleApply,layerEffectType:C.a.transform},a.createElement(r.a,null,a.createElement("div",{className:_.a.dimensions},a.createElement(c.a,{htmlFor:"txtCropWidth"},Object(i.d)("toolBar","width")),a.createElement("div",null),a.createElement(c.a,{htmlFor:"txtCropHeight"},Object(i.d)("toolBar","height")),a.createElement("div",null),a.createElement(h.a,{name:"txtResizeWidth",value:Math.ceil(n?this.calcPercentageFromValue(e,!0):e),onChange:this.setWidth,maxValue:We.p,units:p}),a.createElement("div",{className:_.a.divider},"✕"),a.createElement(h.a,{name:"txtResizeHeight",value:Math.ceil(n?this.calcPercentageFromValue(t,!1):t),onChange:this.setHeight,maxValue:We.p,units:p}),a.createElement(u.c,{for:"btn-keep-proportions",text:Object(i.d)("toolBar","keep_proportions"),offset:{dx:0,dy:-3},hideOnClick:!1}),a.createElement(l.b,{id:"btn-keep-proportions",on:!1,onClick:this.toggleLockProportions},s?a.createElement(Te.default,null):a.createElement(Le.default,null)))),a.createElement(d.b,{name:"percentage",label:Object(i.d)("toolBar","use_percentages"),onChange:this.togglePercentage,value:n}))}}const Ze={width:0,height:0,minWidth:Ne.e,minHeight:Ne.e,nodeIds:He.a};var Je=Object(s.b)((function(e){const{ux:t}=e;return null!=t.panelSelected&&t.panelSelected.panelId===Ge?function(e){const{dx:t,dy:n}=v.a.toSize(w.getDocumentSize(e)),i=w.getCollageMinDocumentSize(e),a=Object(Ue.a)(i);return{width:t,height:n,minWidth:a[0],minHeight:a[1],nodeIds:w.getAllTransformableNodeIds(e)}}(e):Ze}),(function(e){return{resizeDocumentAndNodes:t=>{e(g.b.sagas.undoCurFrame()),e(g.b.scene.resizeDocumentAndNodes(t))},rerasterize:t=>e(g.b.sagas.rerasterize(t)),onOpen:()=>e(g.b.editor.updateEditMode(b.a.resize)),onApply:()=>e(g.b.undo.commit())}}))(Ke),Qe=n("fd22a60f57ba42c2e435"),et=n("37a580ddcb5d2de917aa"),tt=n("eca82aa4c7ca9ddabe01"),nt=n.n(tt),it=n("b80bed530ef7d707399f"),at=n("9ed6fde467ae3e82a333"),st=n("efda1295d911fac47df4");const ot=255,rt=.25,ct=Object(se.V)(60,60,60);class ht extends a.Component{constructor(){super(...arguments),this.setCanvas=e=>{if(e){this.canvas=e;try{this.ctx=e.getContext("2d")}catch(t){}}}}componentDidMount(){this.props.histograms&&(this.setCanvasScale(),this.drawHistogram())}componentDidUpdate(e){Object(E.isEqual)(e,this.props)||this.props.histograms&&this.drawHistogram()}setCanvasScale(){const e=Object(at.a)();this.ctx&&this.ctx.scale(e,e)}getCanvasSize(){return v.a.toSize(v.a.create(parseInt(nt.a.canvas_width,10)||1,parseInt(nt.a.canvas_height,10)||1))}drawHistogram(){if(this.ctx&&this.props.histograms.length>0){const e=this.getCanvasSize();!function(e,t){e.clearRect(0,0,t.dx,t.dy)}(this.ctx,e),function(e,t,n,i,a){const s=function(e,t){return function(n){return(n=Object(st.a)(n,0,t))/t*e.dy}}(t,a);for(let o=0;o<t.dx;o+=rt){const a=o/t.dx*ot;let r=Array(n.length);const c=Math.floor(a),h=Math.ceil(a);for(let e=0;e<n.length;e++){const t=n[e][c],o=n[e][h],d=Object(it.a)(t,o,a-c);r[e]={value:s(d),color:i[e]}}r=r.sort((e,t)=>t.value-e.value),r.length>1&&(r[1].color=Object(se.m)(r[0].color,r[1].color)),r.length>2&&(r[2].color=ct);for(let n=0;n<r.length;n++)e.beginPath(),e.lineWidth=rt,e.strokeStyle=Object(se.v)(r[n].color),e.moveTo(o,t.dy),e.lineTo(o,t.dy-r[n].value),e.stroke()}}(this.ctx,e,this.props.histograms,this.props.colors,this.props.maxScale)}}render(){const e=this.getCanvasSize();return a.createElement("canvas",{className:nt.a.canvas_style,ref:this.setCanvas,width:Object(at.a)()*e.dx,height:Object(at.a)()*e.dy})}}var dt=ht;function lt(e,t){const n=Array(t.length);for(let i=0;i<n.length;i++)n[i]=0;for(let i=0;i<t.length;i++){n[e(i)]+=t[i]}return n}var ut=n("45b687fea5e918dcc5f7");const pt=255;function mt(e,t,n,i,a,s=!0,o=pt){const r=Object(ut.a)(n);return e/=o,i/=o,t/=o,a/=o,function(n){return n/=o,n=(Object(st.a)(n,e,t)-e)/(t-e),n=Math.pow(n,r),n=Object(st.a)(n,i,a),n*=o,s?Math.round(n):n}}function gt(e,t){const n=[];return e.forEach(e=>{for(let i=0;i<e.length;i++)n.push(e[i]),n.sort((e,t)=>t-e),n.length>t&&(n.length=t)}),n[n.length-1]}var bt=n("185a807b72a0493a31ca"),ft=n("a04ffc3ffe53f335ef48");const wt=Object.assign({},bt.g),vt="rgb",xt=255,Ot=[se.cb,se.Z,se.U],_t=10,jt=()=>({rgb:Object(i.d)("effect","rgb"),red:Object(i.d)("effect","red"),green:Object(i.d)("effect","green"),blue:Object(i.d)("effect","blue")}),Ct=M.c.levels,Dt=["red","green","blue"],yt=()=>({none:Object(i.d)("core","none"),custom:Object(i.d)("effect","custom_preset"),autoMonochrome:Object(i.d)("effect","auto_monochrome"),autoMonochromePreserveMidtones:`- ${Object(i.d)("effect","mono_preserve_mids")}`,autoPerColor:Object(i.d)("effect","auto_per_color"),autoPerColorPreserveMidtones:`- ${Object(i.d)("effect","color_preserve_mids")}`}),Pt={autoMonochrome:{perChannel:!1,neutralMidtones:!1},autoMonochromePreserveMidtones:{perChannel:!1,neutralMidtones:!0},autoPerColor:{perChannel:!0,neutralMidtones:!1},autoPerColorPreserveMidtones:{perChannel:!0,neutralMidtones:!0}};class St extends a.PureComponent{constructor(e){let t,n;if(super(e),this.updateMinInput=e=>{e=Object(st.a)(e,0,this.valuesForChannel().maxInput),this.updateVecValue({minInput:e})},this.updateMaxInput=e=>{e=Object(st.a)(e,this.valuesForChannel().minInput,xt),this.updateVecValue({maxInput:e})},this.updateMidPoint=e=>{const{minInput:t,maxInput:n}=this.valuesForChannel();e=((e=Object(st.a)(e,t,n))-t)/(n-t),this.updateVecValue({midPoint:e})},this.inputsOnChange=e=>this.handleInputsChanged(e,!0),this.inputsOnValuesUpdated=e=>this.handleInputsChanged(e,!1),this.updateMinOutput=e=>{e=Object(st.a)(e,0,this.valuesForChannel().maxOutput),this.updateVecValue({minOutput:e})},this.updateMaxOutput=e=>{e=Object(st.a)(e,this.valuesForChannel().minOutput,xt),this.updateVecValue({maxOutput:e})},this.outputsOnChange=e=>this.handleOutputsChanged(e,!0),this.outputsOnValuesUpdated=e=>this.handleOutputsChanged(e,!1),this.updatePreset=e=>{if(this.props.updateFxAttr("preset",e,!1),"custom"===e)return;this.reset();const t=Pt[e],{histograms:n}=this.props;t&&n&&!n.updating&&(t.perChannel?(this.setChannelLevels("red",Object(ft.a)([n.red.histogram],t.neutralMidtones)),this.setChannelLevels("green",Object(ft.a)([n.green.histogram],t.neutralMidtones)),this.setChannelLevels("blue",Object(ft.a)([n.blue.histogram],t.neutralMidtones))):this.setChannelLevels("rgb",Object(ft.a)([n.red.histogram,n.green.histogram,n.blue.histogram],t.neutralMidtones))),this.props.commit()},this.updateChannel=e=>{this.props.updateFxAttr("channel",e,!0)},e.histograms&&this.histogramReady(e.histograms)){const{red:i,green:a,blue:s}=e.histograms;n=gt([i.histogram,a.histogram,s.histogram],_t),t=this.mapHistograms(e.histograms,e.uiFxAttrs)}this.state={mappedHistograms:t,maxScale:n}}updateVecValue(e,t=null){const{uiFxAttrs:n}=this.props;let i=n[t=t||n.channel||vt];i=Object.assign(Object.assign({},i),e),this.props.updateFxAttr("preset","custom",!1),this.props.updateFxAttr(t,i,!1)}scaledMidPoint(){const{midPoint:e,maxInput:t,minInput:n}=this.valuesForChannel();return Math.round(e*(t-n)+n)}handleInputsChanged(e,t){this.valuesForChannel().minInput!==e[0]?this.updateMinInput(e[0]):this.valuesForChannel().maxInput!==e[2]?this.updateMaxInput(e[2]):this.scaledMidPoint()!==e[1]&&this.updateMidPoint(e[1]),t&&this.props.commit()}handleOutputsChanged(e,t){this.valuesForChannel().minOutput!==e[0]?this.updateMinOutput(e[0]):this.valuesForChannel().maxOutput!==e[1]&&this.updateMaxOutput(e[1]),t&&this.props.commit()}valuesForChannel(){const e=Object.assign(Object.assign({},wt),this.props.uiFxAttrs),t=e.channel||vt;return Object.assign(Object.assign({},e[t]),{channel:t})}componentDidUpdate(e){if(this.props.histograms&&!Object(E.isEqual)(e,this.props)&&this.histogramReady(this.props.histograms)&&(this.setState({mappedHistograms:this.mapHistograms(this.props.histograms,this.props.uiFxAttrs)}),!Object(E.isEqual)(e.histograms,this.props.histograms))){const{red:e,green:t,blue:n}=this.props.histograms||{};this.setState({maxScale:gt([e.histogram,t.histogram,n.histogram],_t)})}}mapHistograms(e,t){if(!e)return null;if(!t.rgb)return null;const{minInput:n,maxInput:i,midPoint:a,minOutput:s,maxOutput:o}=t.rgb,r=mt(n,i,a,s,o);return Dt.map(n=>{const i=t[n];let a=e[n].histogram;if(i&&a){const{minInput:e,maxInput:t,midPoint:n,minOutput:s,maxOutput:o}=i;return a=lt(mt(e,t,n,s,o),a),a=lt(r,a),a}return[]})}histogramReady(e){return!!e&&!e.updating}setChannelLevels(e,t){let n=this.props.uiFxAttrs[e];n=Object.assign(Object.assign({},n),t),this.props.updateFxAttr(e,n,!1)}reset(){this.props.updateFxAttr("rgb",bt.f,!1),this.props.updateFxAttr("red",bt.f,!1),this.props.updateFxAttr("green",bt.f,!1),this.props.updateFxAttr("blue",bt.f,!1),this.props.updateFxAttr("channel","rgb",!1),this.props.commit()}histogramProps(e){const t=this.state.maxScale||1,n=Ot,{mappedHistograms:i}=this.state;if(i){if("rgb"===e)return{histograms:i,colors:n,maxScale:t};{const a=Dt.indexOf(e);return{histograms:[i[a]],colors:[n[a]],maxScale:t}}}return{histograms:[],colors:n,maxScale:t}}render(){const{channel:e,minInput:t,maxInput:n,minOutput:s,maxOutput:r}=this.valuesForChannel(),c=this.props.uiFxAttrs.preset,h=this.scaledMidPoint(),d=jt(),l=yt();return a.createElement(o.a,Object.assign({},this.props,{title:Object(i.d)("effect","levels"),panelId:Ct,showMaskButton:!0}),a.createElement(f.b,{label:Object(i.d)("effect","presets"),onChange:this.updatePreset,disabled:!this.state.mappedHistograms},Object(E.keys)(l).map((e,t)=>{const n=l[e];return a.createElement(p.a,{key:t,selected:e===c,value:e,label:n,id:e,shouldShowOverflowTooltip:!0})})),a.createElement(f.b,{label:Object(i.d)("effect","channel"),isRow:!0,onChange:this.updateChannel},Object(E.keys)(d).map((t,n)=>a.createElement(p.a,{key:t,selected:t===e,value:t,label:d[t]}))),a.createElement(dt,Object.assign({},this.histogramProps(e))),a.createElement(et.b,{label:Object(i.d)("effect","inputs"),key:"inputs",min:0,max:255,values:[t,h,n],onUpdate:this.inputsOnValuesUpdated,onChange:this.inputsOnChange}),a.createElement(et.c,{label:Object(i.d)("effect","outputs"),key:"outputs",min:0,max:255,values:[s,r],onUpdate:this.outputsOnValuesUpdated,onChange:this.outputsOnChange}))}}const Et={effectType:oe.a.Levels,panelId:Ct,fxAttrDefaults:wt,getUiFxAttrs:function(e){return e}},kt=Object(ie.b)(Et);const Mt=Object(ie.c)(Et);var At=Object(s.b)((function(e){return Object.assign(Object.assign({},Mt(e)),{histograms:w.getHistograms(e,se.b.RGB)})}),(function(e,t){return Object.assign({},kt(e,t))}))(St),It=n("4c978f0caa283ab05c61"),Ft=n("94eca6a5e6406d417ee8"),zt=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]])}return n};const Bt=M.c.sharpen;var Rt=Object(ie.a)((function(e){var{uiFxAttrs:t,updateFxAttr:n}=e,s=zt(e,["uiFxAttrs","updateFxAttr"]);return a.createElement(o.a,Object.assign({},s,{title:Object(i.d)("effect","sharpen"),panelId:Bt,showMaskButton:!0}),a.createElement(fe.a,{name:"radius",label:Object(i.d)("effect","radius"),min:1,max:128,onChange:n}),a.createElement(fe.a,{name:"strength",label:Object(i.d)("effect","strength"),min:0,max:400,formatter:fe.b.roundedPercent,onChange:n,debounceWaitMS:20}),a.createElement(fe.a,{name:"clarity",label:Object(i.d)("effect","clarity"),min:0,max:Ft.i,onChange:n,debounceWaitMS:20}),a.createElement(fe.a,{name:"fade",label:Object(i.d)("effect","fade"),min:Ft.m,max:Ft.d,formatter:fe.b.roundedPercent,onChange:n}))}),{effectType:oe.a.UnsharpMaskV2,panelId:Bt,fxAttrDefaults:It.b}),Vt=n("025dab547b5bedacbfae"),Ht=n("38cc144a67faf4932014"),Tt=n("89f4e56fe386c673c91c"),Lt=n("87f9eb26d27cad3b452b"),Wt=n("00defd4ac98cd035eada"),Nt=n("cd1a2d656b3886a6ba8d"),Ut=n("498f48497f164fb7c73f"),Gt=n("170301c0c5f906f1d146"),$t=n("6271a22b6df4975c3bb1"),Xt=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]])}return n};const qt=M.c.dodge,Yt=`${qt}_brush_controls`,Kt={low:Object(se.V)(255,0,0,127),mid:Object(se.V)(0,255,0,127),high:Object(se.V)(0,0,255,127),erase:Object(se.V)(255,255,255,255)},Zt=()=>[Object(i.d)("effect","shadows"),Object(i.d)("effect","midtones"),Object(i.d)("effect","highlights"),Object(i.d)("effect","brush_mode_erase")],Jt=e=>{const t=Object(se.S)(e);return(()=>{const e=Zt();return{"255-0-0":e[0],"0-255-0":e[1],"0-0-255":e[2],"255-255-255":e[3]}})()[t]};function Qt(e,t){e(g.b.ux.setBrushColorNoAlpha(t))}const en=Object(s.b)((function(e){const{color:t}=w.getActiveBrush(e).props,n=w.getCurFx(e);let i=!0;if(null!=n){const t=w.getEffect(e,n.effectId);t&&(i=t.attrs.newCurves)}return{brushMode:Jt(t),newCurves:i}}),(function(e,t){return{updateBrush:t=>{const n="erase"===t?Ut.j.reverseSubtract:Ut.j.add;e(g.b.ux.setBrushBlendMode(n)),Qt(e,Kt[t])},onOpenPanel:()=>{e(g.b.ux.setActiveBrush(Lt.a.default)),e(g.b.ux.changeBrushType(Vt.b.softDodgeBurnBrush)),Qt(e,Kt[Ht.b.preset]),t.onOpen()},onApply:()=>{e(g.b.ux.changeBrushType(Vt.b.softRoundBrush)),t.onApply()}}}));var tn=Object(ie.a)(en((function(e){var{updateBrush:t,onOpenPanel:n,onApply:s,brushMode:r,uiFxAttrs:c,updateFxAttr:h,documentSize:d}=e,l=Xt(e,["updateBrush","onOpenPanel","onApply","brushMode","uiFxAttrs","updateFxAttr","documentSize"]);const u=Zt();return a.createElement(o.a,Object.assign({},l,{onOpen:n,onApply:s,title:Object(i.d)("effect","dodge"),panelId:qt,showMaskButton:!1}),a.createElement(Wt.b,{name:"brush",onChange:t,defaultValue:"mid",label:r,options:[{value:"low",label:Object(i.d)("effect","low"),tooltip:u[0]},{value:"mid",label:Object(i.d)("effect","mid"),tooltip:u[1]},{value:"high",label:Object(i.d)("effect","high"),tooltip:u[2]},{value:"erase",label:a.createElement(Nt.default,null),tooltip:u[3]}]}),a.createElement($t.a,{sectionLabel:Yt},a.createElement(Tt.a,{showBrushMode:!1,showShapes:!1,initialBrushValues:Object(Gt.b)(d,.05,50,100)})),a.createElement(be.a,null),a.createElement(fe.a,{name:"fade",label:Object(i.d)("effect","fade"),min:Ft.m,max:Ft.d,formatter:fe.b.roundedPercent,onChange:h}))})),{effectType:oe.a.Dodge,panelId:qt,fxAttrDefaults:Object.assign(Object.assign({},Ht.b),{newCurves:!0})}),nn=n("0de23766ea5bb8f13aef"),an=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]])}return n};const sn=M.c.burn,on=`${sn}_brush_controls`,rn={low:Object(se.V)(255,0,0,127),mid:Object(se.V)(0,255,0,127),high:Object(se.V)(0,0,255,127),erase:Object(se.V)(255,255,255,255)},cn=()=>[Object(i.d)("effect","shadows"),Object(i.d)("effect","midtones"),Object(i.d)("effect","highlights"),Object(i.d)("effect","brush_mode_erase")],hn=e=>{const t=Object(se.S)(e);return(()=>{const e=cn();return{"255-0-0":e[0],"0-255-0":e[1],"0-0-255":e[2],"255-255-255":e[3]}})()[t]};function dn(e,t){e(g.b.ux.setBrushColor(t))}const ln=Object(s.b)((function(e){const{color:t}=w.getActiveBrush(e).props,n=hn(t),i=w.getCurFx(e);let a=!0;if(null!=i){const t=w.getEffect(e,i.effectId);t&&(a=t.attrs.newCurves)}return{brushMode:n,newCurves:a}}),(function(e,t){return{updateBrush:t=>{const n="erase"===t?Ut.j.reverseSubtract:Ut.j.add;e(g.b.ux.setBrushBlendMode(n)),dn(e,rn[t])},onOpenPanel:()=>{e(g.b.ux.setActiveBrush(Lt.a.default)),e(g.b.ux.changeBrushType(Vt.b.softDodgeBurnBrush)),dn(e,rn[nn.b.preset]),t.onOpen()},onApply:()=>{e(g.b.ux.changeBrushType(Vt.b.softRoundBrush)),t.onApply()}}}))((function(e){var{updateBrush:t,onOpenPanel:n,onApply:s,brushMode:r,updateFxAttr:c,documentSize:h}=e,d=an(e,["updateBrush","onOpenPanel","onApply","brushMode","updateFxAttr","documentSize"]);const l=cn();return a.createElement(o.a,Object.assign({},d,{onOpen:n,onApply:s,title:Object(i.d)("effect","burn"),panelId:sn,showMaskButton:!1}),a.createElement(Wt.b,{name:"brush",onChange:t,defaultValue:"mid",label:r,options:[{value:"low",label:Object(i.d)("effect","low"),tooltip:l[0]},{value:"mid",label:Object(i.d)("effect","mid"),tooltip:l[1]},{value:"high",label:Object(i.d)("effect","high"),tooltip:l[2]},{value:"erase",label:a.createElement(Nt.default,null),tooltip:l[3]}]}),a.createElement($t.a,{sectionLabel:on},a.createElement(Tt.a,{showBrushMode:!1,showShapes:!1,initialBrushValues:Object(Gt.b)(h,.05,50,100)})),a.createElement(be.a,null),a.createElement(fe.a,{name:"fade",label:Object(i.d)("effect","fade"),min:Ft.m,max:Ft.d,formatter:fe.b.roundedPercent,onChange:c}))}));var un=Object(ie.a)(ln,{effectType:oe.a.Burn,panelId:sn,fxAttrDefaults:nn.b});n.d(t,"CropPanel",(function(){return H})),n.d(t,"RotatePanel",(function(){return ne})),n.d(t,"ColorsFxPanel",(function(){return ke})),n.d(t,"ExposureFxPanel",(function(){return Ve})),n.d(t,"ResizePanel",(function(){return Je})),n.d(t,"CurvesFxPanel",(function(){return Qe.default})),n.d(t,"LevelsFxPanel",(function(){return At})),n.d(t,"SharpenFxPanel",(function(){return Rt})),n.d(t,"DodgeFxPanel",(function(){return tn})),n.d(t,"BurnFxPanel",(function(){return un}))},a62776011eba6c9672ff:function(e){e.exports=[{id:222182,name:"square",width:1,height:1,scaleDocument:!1},{id:222157,name:{width:3.5,height:2,unit:"in"},width:600,height:1050,scaleDocument:!1},{id:222015,name:{width:4,height:2,unit:"in"},width:600,height:1200,scaleDocument:!1},{id:222016,name:{width:3.5,height:2.5,unit:"in"},width:750,height:1050,scaleDocument:!1},{id:222017,name:{width:2.5,height:3,unit:"in"},width:900,height:750,scaleDocument:!1},{id:222203,name:{width:3,height:3,unit:"in"},width:900,height:900,scaleDocument:!1},{id:222205,name:{width:5,height:3,unit:"in"},width:900,height:1500,scaleDocument:!1},{id:222018,name:{width:2,height:3.5,unit:"in"},width:1050,height:600,scaleDocument:!1},{id:222019,name:{width:5,height:3.5,unit:"in"},width:1050,height:1500,scaleDocument:!1},{id:222158,name:{width:2,height:4,unit:"in"},width:1200,height:600,scaleDocument:!1},{id:222020,name:{width:6,height:4,unit:"in"},width:1200,height:1800,scaleDocument:!1},{id:222021,name:{width:8,height:4,unit:"in"},width:1200,height:2400,scaleDocument:!1},{id:222198,name:{width:6,height:4.25,unit:"in"},width:1275,height:1800,scaleDocument:!1},{id:222022,name:{width:7,height:5,unit:"in"},width:1500,height:2100,scaleDocument:!1},{id:222024,name:{width:8.5,height:5.5,unit:"in"},width:1650,height:2550,scaleDocument:!1},{id:222023,name:{width:5.25,height:5.25,unit:"in"},width:1575,height:1575,scaleDocument:!1},{id:222159,name:{width:4,height:6,unit:"in"},width:1800,height:1200,scaleDocument:!1},{id:222025,name:{width:9,height:6,unit:"in"},width:1800,height:2700,scaleDocument:!1},{id:222207,name:{width:11,height:6,unit:"in"},width:1800,height:3300,scaleDocument:!1},{id:222160,name:{width:5,height:7,unit:"in"},width:2100,height:1500,scaleDocument:!1},{id:222161,name:{width:4,height:8,unit:"in"},width:2400,height:1200,scaleDocument:!1},{id:222026,name:{width:10,height:8,unit:"in"},width:2400,height:3e3,scaleDocument:!1},{id:222199,name:{width:11,height:8,unit:"in"},width:2400,height:3300,scaleDocument:!1},{id:222027,name:{width:11,height:8.5,unit:"in"},width:2550,height:3300,scaleDocument:!1},{id:222162,name:{width:6,height:9,unit:"in"},width:2700,height:1800,scaleDocument:!1},{id:222155,name:{width:8,height:10,unit:"in"},width:3e3,height:2400,scaleDocument:!1},{id:222156,name:{width:8.5,height:11,unit:"in"},width:3300,height:2550,scaleDocument:!1},{id:222187,name:{width:14,height:11,unit:"in"},width:3300,height:4200,scaleDocument:!1},{id:222188,name:{width:9,height:16,unit:"in"},width:4800,height:2700,scaleDocument:!1},{id:222194,name:"a3",width:3508,height:4961,scaleDocument:!1},{id:222197,name:"a4",width:2480,height:3508,scaleDocument:!1},{id:222206,name:"a5",width:1748,height:2480,scaleDocument:!1},{id:222202,name:"a6",width:1240,height:1748,scaleDocument:!1},{id:222201,name:"a7",width:874,height:1240,scaleDocument:!1},{id:222030,name:"etsy_item_listing_photo",width:2e3,height:2e3,scaleDocument:!0},{id:222031,name:"etsy_order_receipt_banner",width:760,height:100,scaleDocument:!0},{id:222032,name:"etsy_shop_big_banner",width:3360,height:840,scaleDocument:!0},{id:222033,name:"etsy_shop_icon",width:500,height:500,scaleDocument:!0},{id:222034,name:"etsy_shop_mini_banner",width:1200,height:160,scaleDocument:!0},{id:222035,name:"etsy_shop_owner_photo",width:400,height:400,scaleDocument:!0},{id:222037,name:"facebook_ad",width:1200,height:628,scaleDocument:!0},{id:222038,name:"facebook_carousel_ad",width:1080,height:1080,scaleDocument:!0},{id:222039,name:"facebook_event_cover",width:1200,height:628,scaleDocument:!0},{id:222040,name:"facebook_group_cover",width:1640,height:856,scaleDocument:!0},{id:222041,name:"facebook_page_cover",width:1640,height:924,scaleDocument:!0},{id:222042,name:"facebook_personal_cover",width:1702,height:630,scaleDocument:!0},{id:222043,name:"facebook_post",width:1200,height:1200,scaleDocument:!0},{id:222044,name:"facebook_profile_image",width:360,height:360,scaleDocument:!0},{id:222045,name:"facebook_story",width:1080,height:1920,scaleDocument:!0},{id:222047,name:"igtv_cover_photo",width:420,height:654,scaleDocument:!0},{id:222154,name:"instagram_carousel_ad",width:1080,height:1080,scaleDocument:!0},{id:222048,name:"instagram_landscape",width:1080,height:566,scaleDocument:!0},{id:222049,name:"instagram_portrait",width:1080,height:1350,scaleDocument:!0},{id:222050,name:"instagram_post",width:1080,height:1080,scaleDocument:!0},{id:222051,name:"instagram_profile",width:360,height:360,scaleDocument:!0},{id:222052,name:"instagram_story",width:1080,height:1920,scaleDocument:!0},{id:222053,name:"instagram_story_highlight_cover",width:1080,height:1920,scaleDocument:!0},{id:222055,name:"linkedin_company_cover",width:1128,height:191,scaleDocument:!0},{id:222056,name:"linkedin_cover_photo",width:1584,height:396,scaleDocument:!0},{id:222057,name:"linkedin_post",width:1400,height:800,scaleDocument:!0},{id:222058,name:"linkedin_profile",width:400,height:400,scaleDocument:!0},{id:222059,name:"linkedin_sponsored_ad",width:1200,height:627,scaleDocument:!0},{id:222061,name:"medium_background_image",width:1500,height:750,scaleDocument:!0},{id:222063,name:"pinterest_pin",width:1e3,height:1500,scaleDocument:!0},{id:222064,name:"pinterest_ad_pin",width:1e3,height:1500,scaleDocument:!0},{id:222065,name:"pinterest_square_pin",width:1e3,height:1e3,scaleDocument:!0},{id:222067,name:"snapchat_ad",width:1080,height:1920,scaleDocument:!0},{id:222068,name:"snapchat_geofilter",width:1080,height:2340,scaleDocument:!0},{id:222069,name:"snapchat_story_ad",width:360,height:600,scaleDocument:!0},{id:222071,name:"tumblr_post",width:500,height:750,scaleDocument:!0},{id:222072,name:"tumblr_profile",width:360,height:360,scaleDocument:!0},{id:222074,name:"twitch_highlight",width:1920,height:1080,scaleDocument:!0},{id:222076,name:"twitter_header",width:1500,height:500,scaleDocument:!0},{id:222077,name:"twitter_lead_generation_card",width:800,height:320,scaleDocument:!0},{id:222078,name:"twitter_post",width:1024,height:512,scaleDocument:!0},{id:222079,name:"twitter_profile",width:400,height:400,scaleDocument:!0},{id:222082,name:"youtube_channel_art",width:2560,height:1440,scaleDocument:!0},{id:222081,name:"youtube_channel_icon",width:800,height:800,scaleDocument:!0},{id:222083,name:"youtube_display_ad",width:300,height:250,scaleDocument:!0},{id:222084,name:"youtube_display_ad_long",width:300,height:60,scaleDocument:!0},{id:222085,name:"youtube_overlay_ad",width:480,height:70,scaleDocument:!0},{id:222086,name:"youtube_thumbnail",width:1280,height:720,scaleDocument:!0},{id:222005,name:"billboard_ad",width:970,height:250,scaleDocument:!0},{id:222006,name:"half_page_ad",width:300,height:600,scaleDocument:!0},{id:222008,name:"large_leaderboard_ad_mobile",width:320,height:100,scaleDocument:!1},{id:222010,name:"large_rectangle_ad",width:336,height:280,scaleDocument:!1},{id:222007,name:"leaderboard_ad",width:728,height:90,scaleDocument:!0},{id:222011,name:"medium_rectangle_ad",width:300,height:250,scaleDocument:!1},{id:222012,name:"skyscraper_ad",width:120,height:600,scaleDocument:!0},{id:222009,name:"small_leaderboard_ad_mobile",width:320,height:50,scaleDocument:!1},{id:222013,name:"wide_skyscraper_ad",width:160,height:600,scaleDocument:!1},{id:222003,name:"kindle_book_cover",width:1600,height:2560,scaleDocument:!0},{id:222002,name:"ibook_cover",width:1600,height:2560,scaleDocument:!0},{id:222004,name:"wattpad_book_cover",width:768,height:1200,scaleDocument:!0},{id:222193,name:{width:200,height:200,unit:"px"},width:200,height:200,scaleDocument:!0},{id:222204,name:{width:250,height:250,unit:"px"},width:250,height:250,scaleDocument:!0},{id:222195,name:{width:60,height:468,unit:"px"},width:468,height:60,scaleDocument:!0},{id:222208,name:{width:90,height:970,unit:"px"},width:970,height:90,scaleDocument:!0},{id:222179,name:{width:768,height:1024,unit:"px"},width:1024,height:768,scaleDocument:!0},{id:222183,name:{width:800,height:1280,unit:"px"},width:1280,height:800,scaleDocument:!0},{id:222181,name:{width:1024,height:1280,unit:"px"},width:1280,height:1024,scaleDocument:!0},{id:222185,name:{width:1080,height:1920,unit:"px"},width:1920,height:1080,scaleDocument:!0},{id:222186,name:{width:1600,height:2560,unit:"px"},width:2560,height:1600,scaleDocument:!0},{id:222189,name:"2k_qhd",width:2560,height:1440,scaleDocument:!0},{id:222102,name:"4k_uhdtv",width:3840,height:2160,scaleDocument:!0},{id:222190,name:"360p_ld_video",width:640,height:360,scaleDocument:!0},{id:222101,name:"480p_sd_video",width:854,height:480,scaleDocument:!0},{id:222103,name:"720p_hd_video",width:1280,height:720,scaleDocument:!0},{id:222100,name:"1080p_hd_video",width:1920,height:1080,scaleDocument:!0},{id:222191,name:"vertical_full_hd",width:1080,height:1920,scaleDocument:!0},{id:222192,name:"vertical_hd_ready",width:720,height:1280,scaleDocument:!0},{id:222165,name:"business_card",width:1050,height:600,scaleDocument:!0},{id:222166,name:"calendar",width:1920,height:1080,scaleDocument:!0},{id:222167,name:"card",width:1500,height:2100,scaleDocument:!0},{id:222168,name:"cover_letter",width:2550,height:3300,scaleDocument:!0},{id:222028,name:"email_header",width:600,height:200,scaleDocument:!0},{id:222169,name:"flyer",width:2550,height:3300,scaleDocument:!0},{id:222170,name:"invoice",width:2550,height:3300,scaleDocument:!0},{id:222171,name:"postcard",width:1200,height:1800,scaleDocument:!0},{id:222172,name:"poster",width:2550,height:3300,scaleDocument:!1},{id:222173,name:"presentation",width:1920,height:1080,scaleDocument:!0},{id:222174,name:"resume",width:2550,height:3300,scaleDocument:!0},{id:222244,name:"coloring_sheet",width:2550,height:3300,scaleDocument:!1},{id:222214,name:"planner",width:2550,height:3300,scaleDocument:!1},{id:222250,name:"pinterest_shopping_ad_pin",width:1e3,height:1500,scaleDocument:!1},{id:222228,name:"instagram_layout",width:3240,height:3240,scaleDocument:!1},{id:222236,name:"short_email",width:1200,height:1800,scaleDocument:!1},{id:222240,name:"worksheet",width:2550,height:3300,scaleDocument:!1},{id:222216,name:"weekly_planner",width:2550,height:3300,scaleDocument:!1},{id:222211,name:"daily_calendar",width:2550,height:3300,scaleDocument:!1},{id:222230,name:"food_menu",width:2550,height:3300,scaleDocument:!1},{id:222219,name:"daily_schedule",width:2550,height:3300,scaleDocument:!1},{id:222238,name:"long_email",width:1200,height:3e3,scaleDocument:!1},{id:222215,name:"daily_planner",width:2550,height:3300,scaleDocument:!1},{id:222229,name:"menu",width:2550,height:3300,scaleDocument:!1},{id:222239,name:"tumblr_banner",width:3e3,height:1055,scaleDocument:!1},{id:222248,name:"pinterest_carousel_pin",width:1e3,height:1500,scaleDocument:!1},{id:222217,name:"monthly_planner",width:2550,height:3300,scaleDocument:!1},{id:222246,name:"budget_planner",width:2550,height:3300,scaleDocument:!1},{id:222231,name:"drink_menu",width:2550,height:3300,scaleDocument:!1},{id:222249,name:"pinterest_carousel_ad_pin",width:1e3,height:1500,scaleDocument:!1},{id:222212,name:"weekly_calendar",width:2550,height:3300,scaleDocument:!1},{id:222245,name:"email_signature",width:600,height:200,scaleDocument:!1},{id:222237,name:"medium_email",width:1200,height:2400,scaleDocument:!1},{id:222242,name:"soundcloud_banner",width:2480,height:520,scaleDocument:!1},{id:222221,name:"monthly_schedule",width:2550,height:3300,scaleDocument:!1},{id:222251,name:"pinterest_collection_pin",width:1e3,height:1500,scaleDocument:!1},{id:222227,name:"business_plan",width:2550,height:3300,scaleDocument:!1},{id:222243,name:"pinterest_idea_pin",width:1080,height:1920,scaleDocument:!1},{id:222213,name:"monthly_calendar",width:2550,height:3300,scaleDocument:!1},{id:222226,name:"gift_certificate",width:1800,height:1200,scaleDocument:!1},{id:222225,name:"certificate",width:1800,height:1200,scaleDocument:!1},{id:222234,name:"zoom_background",width:1920,height:1080,scaleDocument:!1},{id:222222,name:"instagram_ad",width:1080,height:1080,scaleDocument:!0},{id:222223,name:"instagram_bingo",width:1080,height:1920,scaleDocument:!1},{id:222210,name:"facebook_shop",width:1600,height:1200,scaleDocument:!1},{id:222232,name:"recipe_card",width:1800,height:1200,scaleDocument:!1},{id:222220,name:"weekly_schedule",width:2550,height:3300,scaleDocument:!1},{id:222218,name:"schedule",width:2550,height:3300,scaleDocument:!1},{id:222224,name:"instagram_question",width:1080,height:1920,scaleDocument:!1},{id:222247,name:"pinterest_video_pin",width:1e3,height:1500,scaleDocument:!1}]},ce278268d8afac4fda10:function(e,t,n){var i=n("4f984cc61cdfb2c5a3d7");"string"==typeof i&&(i=[[e.i,i,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n("1e4534d1d62a11482e97")(i,a);i.locals&&(e.exports=i.locals)},eca82aa4c7ca9ddabe01:function(e,t,n){var i=n("2c020a6d173d75eacda5");"string"==typeof i&&(i=[[e.i,i,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n("1e4534d1d62a11482e97")(i,a);i.locals&&(e.exports=i.locals)},fd22a60f57ba42c2e435:function(e,t,n){"use strict";n.r(t);var i=n("58cf5f1b1e4a6f0868c5"),a=n("8af190b70a6bc55c6f1b"),s=n("9c772359e08e81b5b3ba"),o=n("4aaad9891c45466dfe8a"),r=n("24a74d8dc2d9aae519f4"),c=n("dc08d784e9162147899b"),h=n("7bbbac7aed806ed992a7"),d=n("2558ccbaf65dbaa2a8ea"),l=n("607991ff84ac9065b176"),u=n("2941cd18153bbb733bda"),p=n("0a81c721557e72a0975d"),m=n("efda1295d911fac47df4"),g=n("4a329aa425bfd9bd2756"),b=n("9ed6fde467ae3e82a333"),f=n("0f644780fd9187d136a1"),w=n("3e4e0610ce9ffb24b7f3"),v=n("8ad54a690e135bdfc930");const x="rgba(200, 200, 200, 1)",O="rgba(190, 190, 190, 1)",_=1,j=.5,C=["rgba(0,0,0,0.4)","rgba(255,0,0,0.4)","rgba(0,255,0,0.4)","rgba(0,0,255,0.4)"],D=["rgba(0,0,0,1)","rgba(255,0,0,1)","rgba(0,255,0,1)","rgba(0,0,255,1)"],y=3,P=10,S={points:[]};class E extends a.PureComponent{constructor(e){super(e),this.couldRemoveSelectedPoint=!1,this.getDocument=()=>{return this.document},this.getCanvasCoord=e=>{const t=this.canvas.getBoundingClientRect();return{x:e.clientX-t.left,y:e.clientY-t.top}},this.offCanvas=e=>{const t=this.canvas.getBoundingClientRect();if(0===t.width&&0===t.height){if(e.clientX>this.canvas.width||e.clientX<0)return!0;if(e.clientY>this.canvas.height||e.clientY<0)return!0}else{if(e.clientX>t.right||e.clientX<t.left)return!0;if(e.clientY>t.bottom||e.clientY<t.top)return!0}return!1},this.canvasPointToGraphPoint=e=>{return function(e,t){const n=e;let i=t.x/e,a=(n-t.y)/n;return i*=255,a*=255,i=Object(m.a)(i,0,255),a=Object(m.a)(a,0,255),{x:i,y:a}}(this.props.canvasSize,e)},this.handleMouseUp=e=>{this.shouldRemovePoint(e)&&this.removePoint(this.props.curveIndex,this.state.selectedPoint),this.props.onFinishedDraggging&&this.props.onFinishedDraggging(),this.setState({selectedPoint:-1,mouseDown:!1,minX:null,maxX:null},this.updateGraph)},this.handleMouseDown=e=>{this.offCanvas(e)||(this.couldRemoveSelectedPoint=!1,this.setState({mouseDown:!0},()=>{const t=this.canvasPointToGraphPoint(this.getCanvasCoord(e));this.handlePointClicked(t)||this.handleLineClicked(t)}))},this.handleMouseMove=e=>{const t=this.canvasPointToGraphPoint(this.getCanvasCoord(e));this.state.selectedPoint>=0?this.moveSelectedPoint(t):this.state.mouseDown?t.x<this.state.maxX&&t.x>this.state.minX&&this.handleLineClicked(t,!0):this.setPointCursor(t)||this.setLineCursor(t)||this.resetCursor()},this.setCanvas=e=>{e&&(this.canvas=e,v.i||(this.ctx=e.getContext("2d")))},this.state={cursor:"default",selectedPoint:-1,mouseDown:!1,maxX:null,minX:null}}componentDidMount(){this.document=document,this.document.addEventListener("mousedown",this.handleMouseDown),this.document.addEventListener("mouseup",this.handleMouseUp),this.document.addEventListener("mousemove",this.handleMouseMove),this.props.curves&&(this.setCanvasScale(),this.updateGraph())}componentWillUnmount(){this.document.removeEventListener("mousedown",this.handleMouseDown),this.document.removeEventListener("mouseup",this.handleMouseUp),this.document.removeEventListener("mousemove",this.handleMouseMove)}componentDidUpdate(e,t){Object(s.isEqual)(e,this.props)||this.props.curves&&this.updateGraph()}graphPointToCanvasPoint(e){return k(this.props.canvasSize,e)}interpolators(){const{curves:e=[]}=this.props;return e.map(e=>Object(g.e)("spline",Object(g.f)(e)))}currentInterpolator(){return this.interpolators()[this.props.curveIndex]}findPointClicked(e){const{curves:t=[],curveIndex:n}=this.props;return(t[n]||S).points.findIndex(Object(s.partial)(M,e))}isPointOnCurve(e){const t=e.x,{curves:n=[],curveIndex:i}=this.props,a=Object(g.e)("spline",Object(g.f)(n[i]||S));return M(e,{x:t,y:Object(m.a)(a.interpolate(t),0,255)})}shouldRemovePoint(e){if(!this.couldRemoveSelectedPoint)return!1;const t=this.props.curves[this.props.curveIndex];return!(this.state.selectedPoint<1||this.state.selectedPoint===t.points.length-1)&&(this.props.osFamily===w.b.mac&&e.metaKey||this.props.osFamily===w.b.windows&&e.ctrlKey)}handleLineClicked(e,t=!1){if(!this.isPointOnCurve(e)&&!t)return!1;const{curveIndex:n}=this.props,i=this.props.curves[n],{x:a,y:s}=e;let o=i.points.findIndex(e=>e.x>a);o<0&&(o=i.points.length);const r=o>0?i.points[o-1].x:0,c=o<i.points.length?i.points[o].x:255;return this.setState({selectedPoint:o,minX:r,maxX:c}),this.insertPoint(n,o,a,s),!0}handlePointClicked(e){const t=this.findPointClicked(e),{curveIndex:n}=this.props,i=this.props.curves[n],a=t>0?i.points[t-1].x:0,s=t+1<i.points.length?i.points[t+1].x:255;return this.setState({selectedPoint:t,maxX:s,minX:a}),this.couldRemoveSelectedPoint=t>-1,this.couldRemoveSelectedPoint}moveSelectedPoint(e){const{selectedPoint:t,minX:n,maxX:i}=this.state;if(t<0)return;let{x:a}=e;this.couldRemoveSelectedPoint=!1;const{curveIndex:s}=this.props,o=this.props.curves[s];!(t===o.points.length-1||0===t)&&(a>=i||a<=n)?(this.removePoint(this.props.curveIndex,this.state.selectedPoint),this.setState({selectedPoint:-1},this.updateGraph)):(0===t&&(a=Object(m.a)(a,n,i-1)),t===o.points.length-1&&(a=Object(m.a)(a,n+1,i)),this.setPoint(this.props.curveIndex,this.state.selectedPoint,a,e.y))}selectedPointCoords(){if(this.state.selectedPoint<0||!this.props.curves)return null;const{curves:e,curveIndex:t}=this.props;return e[t].points[this.state.selectedPoint]}setPointCursor(e){return!(this.findPointClicked(e)<0)&&(this.setState({cursor:"move"}),!0)}setLineCursor(e){return!!this.isPointOnCurve(e)&&(this.setState({cursor:"crosshair"}),!0)}resetCursor(){return this.setState({cursor:"default"}),!0}insertPoint(e,t,n,i){this.updatePoints(e,n,i,(e,n)=>[...e.slice(0,t),n,...e.slice(t)])}removePoint(e,t){this.updatePoints(e,0,0,(e,n)=>[...e.slice(0,t),...e.slice(t+1)])}setPoint(e,t,n,i){this.updatePoints(e,n,i,(e,n)=>[...e.slice(0,t),n,...e.slice(t+1)])}updatePoints(e,t,n,i){let a=this.props.curves,s=a[e],{points:o}=s;o=i(o,{x:Math.round(t),y:Math.round(n)}),s={points:o},a=[...a.slice(0,e),s,...a.slice(e+1)],this.props.setCurves(a)}setCanvasScale(){const e=Object(b.a)();this.ctx&&this.ctx.scale(e,e)}updateGraph(){if(this.ctx){const{canvasSize:e,curves:t,curveIndex:n}=this.props,i=this.selectedPointCoords();!function(e,t){e.clearRect(0,0,t,t)}(this.ctx,e),function(e,t){e.beginPath(),e.strokeStyle=x,e.lineWidth=_,e.moveTo(_/2,t),e.lineTo(t+_/2,0),e.stroke()}(this.ctx,e),function(e,t){const n=t/4;e.beginPath(),e.strokeStyle=x,e.lineWidth=j;for(let i=1;i<=3;i++)e.moveTo(n*i,0),e.lineTo(n*i,t),e.moveTo(0,n*i+0),e.lineTo(t,n*i);e.stroke()}(this.ctx,e),function(e,t,n,i){const a=n,s=a-1;t.forEach((t,o)=>{e.beginPath(),e.strokeStyle=o===i?D[o]:C[o],e.lineWidth=_;for(let i=0;i<=a;i+=1){const a=i/s*255,o=t.interpolate(a),{x:r,y:c}=k(n,{x:a,y:o});0===i?e.moveTo(r,c):e.lineTo(r,c)}e.stroke()})}(this.ctx,this.interpolators(),e,n),function(e,t,n,i){n.points.forEach(n=>{const{x:a,y:s}=k(t,n);e.beginPath(),e.strokeStyle=D[i],e.lineWidth=_,e.arc(a,s,y,0,2*Math.PI),e.stroke()})}(this.ctx,e,t[n],n),i&&function(e,t,n){const{x:i,y:a}=n;e.beginPath(),e.strokeStyle=O,e.lineWidth=_,e.moveTo(0,a),e.lineTo(t,a),e.moveTo(i,0),e.lineTo(i,t),e.stroke()}(this.ctx,e,this.graphPointToCanvasPoint(i))}}render(){const{canvasSize:e}=this.props,{cursor:t}=this.state;return a.createElement("canvas",{ref:this.setCanvas,width:Object(b.a)()*e,height:Object(b.a)()*e,style:{width:e,height:e,cursor:t}})}}function k(e,t){const n=e;let i=t.x/255*n,a=e-t.y/255*n;return i=Object(m.a)(i,0,e),a=Object(m.a)(a,0,e),{x:i,y:a}}function M(e,t){const{x:n,y:i}=t,{x:a,y:s}=e;return Math.abs(a-n)<=P&&Math.abs(s-i)<=P}var A=Object(p.b)((function(e){return{osFamily:f.p(e)}}))(E),I=n("92f89ad909ff830126b9"),F=n("94eca6a5e6406d417ee8"),z=n("055b92b258f07620b728"),B=n.n(z),R=n("2b9ee7288ec5565199f1");n.d(t,"CurvesFxPanelUnconnected",(function(){return U})),n.d(t,"CurvesFxDevPanel",(function(){return G}));const V=R.c.curves,H=Object.assign(Object.assign({},l.b),{curves:Object(g.b)(u.d.default),preset:"default",channel:"rgb"}),T=()=>({rgb:Object(i.d)("effect","rgb"),red:Object(i.d)("effect","red"),green:Object(i.d)("effect","green"),blue:Object(i.d)("effect","blue")}),L=["rgb","red","green","blue"],W=Object(g.a)([[0,0],[255,255]]),N={points:[]};class U extends a.PureComponent{constructor(e){super(e),this.handlePresetChange=e=>{const t=Object(g.b)(u.d[e]||u.d.default);this.props.updateFxAttr("channel","rgb",!1),this.props.updateFxAttr("curves",t,!1);const n=u.b[e]||0;this.props.updateFxAttr("colorOverride",n,!1),this.props.updateFxAttr("preset",e,!1),this.props.commit()},this.handleChannelChange=e=>{const{curves:t}=this.props.uiFxAttrs,n=L.indexOf(e);if(n<0)return;this.props.updateFxAttr("channel",e,!1);const i=new Array(L.length);for(let a=0;a<L.length;a++)i[a]=t[a]||N,a===n&&0===i[a].points.length?i[a]=W:a!==n&&Object(s.isEqual)(i[a],W)&&(i[a]=N);Object(s.isEqual)(t,i)||this.props.updateFxAttr("curves",i,!1),this.props.commit()},this.setCurves=e=>{this.props.updateFxAttr("preset","custom",!1),this.props.updateFxAttr("curves",e,!1)},this.handleRawPointInputChanged=e=>{const t=this.parseRawPointInput(e.target.value);t?(this.setCurves(t),this.props.commit()):this.handlePresetChange("default")},this.onFinishedDraggging=()=>this.props.commit()}parseRawPointInput(e){const t=(e=e.replace(/\n/g,"")).match(/(\{.*?\})+/g);if(t&&4===t.filter(e=>!!e).length){const e=t.map(e=>{let t=(e=e.slice(1,-1)).split(/[\,\s]+/);t=t.filter(e=>""!==e);const n=t.map(Number);return Object(g.d)(n)}),[n,i,a,s]=e;return[n,s,a,i]}return null}renderRawPontInput(){return a.createElement("div",null,a.createElement("label",null,"Raw curve input"),a.createElement("textarea",{style:{width:"100%",height:100,overflow:"auto",fontFamily:"courier"},onChange:this.handleRawPointInputChanged}),a.createElement("pre",{style:{fontFamily:"courier",fontSize:8}},"Example (rgb, blue, green, red):",a.createElement("br",null),"{0,0,255,255}",a.createElement("br",null),"{0,0,120,128,255,240}",a.createElement("br",null),"{0,0,100,98,240,255}",a.createElement("br",null),"{0,0,64,90,96,100,128,170,255,255}"))}render(){const{channel:e,curves:t,preset:n}=this.props.uiFxAttrs,o=T(),l=Object(u.a)();return a.createElement(r.a,Object.assign({},this.props,{title:Object(i.d)("effect","curves"),panelId:this.props.panelId||V,showMaskButton:!0}),a.createElement(h.b,{label:Object(i.d)("effect","presets"),onChange:this.handlePresetChange},Object(s.keys)(l).map((e,t)=>a.createElement(d.a,{key:t,selected:e===n,value:e,label:l[e]}))),a.createElement(h.b,{label:Object(i.d)("effect","channel"),isRow:!0,onChange:this.handleChannelChange,defaultValue:e},Object(s.keys)(o).map((t,n)=>a.createElement(d.a,{key:t,selected:t===e,value:t,label:o[t]}))),a.createElement("div",{className:B.a.curve_control_container},a.createElement(A,{curves:t,canvasSize:parseInt(B.a.curve_control_width,10),curveIndex:L.indexOf(e),setCurves:this.setCurves,onFinishedDraggging:this.onFinishedDraggging})),a.createElement(c.a,{key:"colorOverride",name:"colorOverride",label:Object(i.d)("effect","color_override"),min:0,max:100,formatter:c.b.roundedPercent,onChange:this.props.updateFxAttr}),a.createElement(c.a,{key:"fade",name:"fade",label:Object(i.d)("effect","fade"),min:F.m,max:F.d,formatter:c.b.roundedPercent,onChange:this.props.updateFxAttr}),this.props.enableRawPointInput?this.renderRawPontInput():null)}}t.default=Object(o.a)(U,{effectType:I.a.Curves,panelId:V,fxAttrDefaults:H,getUiFxAttrs:function({curves:e,preset:t,channel:n}){return{curves:e,preset:t,channel:n}}});const G=Object(o.a)((function(e){return a.createElement(U,Object.assign({},e,{enableRawPointInput:!0,panelId:"curves_dev"}))}),{effectType:I.a.Curves,panelId:"curves_dev",fxAttrDefaults:H})}}]);
//# sourceMappingURL=editor-panel-edits.ecb057317df0c9c486c3.bundle.js.map